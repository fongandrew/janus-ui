@layer base {
	/* Stop scrolling when modal open */
	body:has(:modal) {
		@apply overflow-hidden;
	}
}

@layer components {
	.c-modal {
		@apply bg-transparent;

		max-width: 100vw;
	}

	.c-modal::backdrop {
		@apply bg-backdrop backdrop-blur-sm;
	}

	/* Fullscreen on mobile */
	.c-modal__body {
		@apply bg-card text-card-fg;
		@apply border-dynamic-card sm:border-md;
		@apply shadow-lg outline-none;
		@apply rounded-sm sm:rounded-md md:rounded-lg;
		@apply fixed inset-xs overflow-hidden sm:inset-auto sm:left-1/2 sm:top-1/2 sm:max-h-full sm:w-modal sm:max-w-full sm:-translate-x-1/2 sm:-translate-y-1/2;
		@apply flex flex-col;
	}

	@media screen(sm) {
		.c-modal__body {
			max-height: calc(100vh - theme('spacing.sm'));
		}
	}

	@media screen(md) {
		.c-modal__body {
			max-height: calc(100vh - theme('spacing.md'));
		}
	}

	@media screen(lg) {
		.c-modal__body {
			max-height: calc(100vh - theme('spacing.lg'));
		}
	}

	.c-modal__content,
	.c-modal__header {
		@apply p-md;
	}

	* + .c-modal__content {
		@apply pt-0;
	}

	.c-modal__content:has(+ .c-modal__footer) {
		@apply pb-xs; /* Not zero -- leave some space for focus ring */
	}

	.c-modal__header {
		@apply flex-none;
	}

	.c-modal__content {
		@apply relative flex-1 overflow-auto;
	}

	.c-modal__content:not(.c-modal__content--scroll-top) {
		box-shadow: theme('boxShadow.innerTop');
	}

	.c-modal__content:not(.c-modal__content--scroll-bottom):has(+ .c-modal__footer) {
		box-shadow: theme('boxShadow.innerBottom');
	}

	.c-modal__content:not(.c-modal__content--scroll-top, .c-modal__content--scroll-bottom):has(
			+ .c-modal__footer
		) {
		box-shadow: theme('boxShadow.innerTop'), theme('boxShadow.innerBottom');
	}

	.c-modal__title {
		@apply flex-1 text-xl font-bold;
	}

	.c-modal__footer {
		@apply flex flex-none items-center justify-end gap-md p-md;
	}
}
